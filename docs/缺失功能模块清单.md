# 缺失功能模块清单

## 概述

本文档列出 XMind 思维导图中缺失但重要的功能模块，并提供详细的补充建议。

## 一、基础支撑模块（必需）⚠️

### 1. 用户管理（User Management）❌

**缺失状态**: XMind 中完全缺失

**重要性**: ⭐⭐⭐⭐⭐ (P0 - 必须实现)

**必需功能点：**

| 功能点 | 数据库支持 | 实现状态 | 优先级 |
|--------|-----------|---------|--------|
| 用户注册/登录 | ✅ `users` 表 | ✅ 部分实现 | P0 |
| 用户资料管理 | ✅ `users` 表 | ❌ 未实现 | P0 |
| 用户组管理 | ✅ `groups_users` 表 | ❌ 未实现 | P0 |
| 用户状态管理 | ✅ `users.status` 字段 | ❌ 未实现 | P0 |
| 密码策略 | ⚠️ 需扩展 | ❌ 未实现 | P1 |
| 双因素认证（2FA） | ✅ `users.twofa_*` 字段 | ❌ 未实现 | P1 |
| 用户偏好设置 | ✅ `user_preferences` 表 | ❌ 未实现 | P1 |
| 邮箱管理 | ✅ `email_addresses` 表 | ❌ 未实现 | P1 |

**数据库验证：**
```sql
-- 已存在的表结构
users: 用户主表，包含所有用户信息
email_addresses: 用户邮箱地址
user_preferences: 用户偏好设置
groups_users: 用户组关联（但缺少 groups 表定义）
```

**建议补充内容：**
- 用户注册流程
- 用户登录认证（JWT/Session）
- 用户资料编辑
- 用户头像上传
- 用户状态管理（激活/锁定/删除）
- 用户组管理（如果数据库有 groups 表）
- 密码重置功能
- 密码策略配置（最小长度、复杂度要求等）
- 双因素认证实现
- 用户偏好设置（语言、时区、通知偏好等）

### 2. 系统设置（System Settings）❌

**缺失状态**: XMind 中完全缺失

**重要性**: ⭐⭐⭐⭐⭐ (P0 - 必须实现)

**必需功能点：**

| 功能点 | 数据库支持 | 实现状态 | 优先级 |
|--------|-----------|---------|--------|
| 全局配置管理 | ✅ `settings` 表 | ❌ 未实现 | P0 |
| 邮件服务器配置 | ⚠️ 需扩展 | ❌ 未实现 | P0 |
| 安全设置 | ⚠️ 需扩展 | ❌ 未实现 | P1 |
| 系统信息 | ⚠️ 需扩展 | ❌ 未实现 | P1 |
| 备份与恢复 | ❌ 无 | ❌ 未实现 | P2 |
| 日志管理 | ⚠️ 需扩展 | ❌ 未实现 | P2 |

**数据库验证：**
```sql
-- 已存在的表结构
settings: 系统设置表，支持 key-value 存储
```

**建议补充内容：**
- 系统基本信息配置（站点名称、描述等）
- 邮件服务器配置（SMTP 设置）
- 安全设置（密码策略、会话超时、IP 白名单等）
- 系统信息展示（版本、数据库信息、服务器信息等）
- 备份与恢复功能（数据库备份、文件备份）
- 系统日志查看和管理
- 缓存管理（Redis 配置）
- 文件存储配置（本地/OSS等）

### 3. 活动流（Activity Stream）❌

**缺失状态**: XMind 中完全缺失

**重要性**: ⭐⭐⭐⭐ (P1 - 重要功能)

**必需功能点：**

| 功能点 | 数据库支持 | 实现状态 | 优先级 |
|--------|-----------|---------|--------|
| 项目活动流 | ✅ `journals` 表 | ❌ 未实现 | P1 |
| 用户活动流 | ✅ `journals` 表 | ❌ 未实现 | P1 |
| 全局活动流 | ✅ `journals` 表 | ❌ 未实现 | P1 |
| 活动过滤 | ✅ 支持 | ❌ 未实现 | P1 |
| 活动详情 | ✅ `journal_details` 表 | ❌ 未实现 | P1 |

**数据库验证：**
```sql
-- 已存在的表结构
journals: 活动日志主表
journal_details: 活动详情表（记录字段变更）
```

**建议补充内容：**
- 项目活动流（显示项目相关的所有活动）
- 用户活动流（显示用户相关的活动）
- 全局活动流（显示系统所有活动）
- 活动类型过滤（任务创建、状态变更、评论等）
- 活动时间范围过滤
- 活动详情展示（字段变更前后对比）
- 活动流分页和加载更多
- 活动流实时更新（WebSocket）

## 二、增强功能模块（建议）

### 4. 搜索功能（Search）❌

**缺失状态**: XMind 中未明确列出

**重要性**: ⭐⭐⭐⭐ (P1 - 重要功能)

**建议功能点：**

| 功能点 | 数据库支持 | 实现状态 | 优先级 |
|--------|-----------|---------|--------|
| 全文搜索 | ⚠️ 需扩展 | ❌ 未实现 | P1 |
| 高级搜索 | ✅ `queries` 表 | ❌ 未实现 | P1 |
| 搜索历史 | ⚠️ 需扩展 | ❌ 未实现 | P2 |
| 搜索结果导出 | ✅ 支持 | ❌ 未实现 | P2 |

**数据库验证：**
```sql
-- 已存在的表结构
queries: 查询表，支持保存的查询
```

**建议补充内容：**
- 全局搜索（搜索所有项目、任务、Wiki等）
- 项目内搜索（搜索特定项目内容）
- 高级搜索（多条件组合）
- 搜索建议和自动完成
- 搜索历史记录
- 搜索结果高亮
- 搜索结果导出（CSV/Excel）
- 全文索引（Elasticsearch 集成）

### 5. 日历视图（Calendar）❌

**缺失状态**: XMind 中完全缺失

**重要性**: ⭐⭐⭐ (P2 - 增强功能)

**建议功能点：**

| 功能点 | 数据库支持 | 实现状态 | 优先级 |
|--------|-----------|---------|--------|
| 任务日历 | ✅ `issues.due_date` | ❌ 未实现 | P2 |
| 里程碑日历 | ✅ `versions.effective_date` | ❌ 未实现 | P2 |
| 个人日历 | ✅ 支持 | ❌ 未实现 | P2 |
| 团队日历 | ✅ 支持 | ❌ 未实现 | P2 |

**数据库验证：**
```sql
-- 已存在的字段
issues.due_date: 任务截止日期
issues.start_date: 任务开始日期
versions.effective_date: 版本发布日期
time_entries.spent_on: 工时日期
```

**建议补充内容：**
- 月视图日历
- 周视图日历
- 日视图日历
- 任务在日历上的显示
- 里程碑在日历上的显示
- 个人日历（显示分配给当前用户的任务）
- 团队日历（显示团队所有任务）
- 日历事件点击查看详情
- 日历事件拖拽修改日期
- 日历导出（iCal 格式）

### 6. 报表与统计（Reports & Statistics）❌

**缺失状态**: README 中有列出，但 XMind 中缺失

**重要性**: ⭐⭐⭐⭐ (P1 - 重要功能)

**建议功能点：**

| 功能点 | 数据库支持 | 实现状态 | 优先级 |
|--------|-----------|---------|--------|
| 项目统计报表 | ✅ 支持 | ❌ 未实现 | P1 |
| 工时统计报表 | ✅ `time_entries` 表 | ❌ 未实现 | P1 |
| 任务完成率统计 | ✅ `issues` 表 | ❌ 未实现 | P1 |
| 用户工作量统计 | ✅ 支持 | ❌ 未实现 | P1 |
| 自定义报表 | ⚠️ 需扩展 | ❌ 未实现 | P2 |

**数据库验证：**
```sql
-- 已存在的表结构
time_entries: 工时记录，支持按年/月/周统计
issues: 任务表，支持完成率统计
projects: 项目表，支持项目统计
```

**建议补充内容：**
- 项目概览统计（任务数、完成率、工时等）
- 工时统计报表（按项目、用户、时间维度）
- 任务完成率统计（按项目、用户、跟踪器）
- 用户工作量统计（任务数、工时、完成率）
- 项目进度报表
- 版本进度报表
- 自定义报表配置
- 报表导出（PDF/Excel）
- 报表图表展示（柱状图、饼图、折线图等）

### 7. 导入/导出（Import/Export）❌

**缺失状态**: XMind 中完全缺失

**重要性**: ⭐⭐⭐ (P2 - 增强功能)

**建议功能点：**

| 功能点 | 数据库支持 | 实现状态 | 优先级 |
|--------|-----------|---------|--------|
| CSV 导入/导出 | ✅ `imports` 表 | ❌ 未实现 | P2 |
| Excel 导入/导出 | ✅ 支持 | ❌ 未实现 | P2 |
| 数据迁移工具 | ✅ `imports` 表 | ❌ 未实现 | P2 |
| 批量操作 | ✅ 支持 | ❌ 未实现 | P2 |

**数据库验证：**
```sql
-- 已存在的表结构
imports: 导入任务表
import_items: 导入项表
```

**建议补充内容：**
- 任务 CSV 导入/导出
- 项目 CSV 导入/导出
- 用户 CSV 导入/导出
- Excel 格式支持
- 数据验证和错误提示
- 导入进度显示
- 导入结果报告
- 批量任务操作（状态变更、分配等）
- 批量项目操作
- 数据迁移工具（从其他系统迁移）

### 8. 审计日志（Audit Log）❌

**缺失状态**: XMind 中完全缺失

**重要性**: ⭐⭐⭐ (P2 - 增强功能)

**建议功能点：**

| 功能点 | 数据库支持 | 实现状态 | 优先级 |
|--------|-----------|---------|--------|
| 操作日志记录 | ✅ `journals` 表 | ✅ 部分支持 | P2 |
| 变更历史追踪 | ✅ `journal_details` 表 | ✅ 部分支持 | P2 |
| 安全审计 | ⚠️ 需扩展 | ❌ 未实现 | P2 |

**数据库验证：**
```sql
-- 已存在的表结构
journals: 活动日志
journal_details: 变更详情
```

**建议补充内容：**
- 用户操作日志（登录、登出、操作等）
- 数据变更历史（字段变更前后对比）
- 权限变更审计
- 敏感操作审计（删除、批量操作等）
- 审计日志查询和过滤
- 审计日志导出
- 安全事件监控
- 异常行为检测

## 三、通知增强（可选）

### 9. 多渠道通知 ❌

**缺失状态**: README 中有列出，但 XMind 中缺失

**重要性**: ⭐⭐ (P3 - 可选功能)

**可选功能点：**

| 功能点 | 数据库支持 | 实现状态 | 优先级 |
|--------|-----------|---------|--------|
| 短信通知（SMS） | ❌ 需扩展 | ❌ 未实现 | P3 |
| 微信通知（WeChat） | ❌ 需扩展 | ❌ 未实现 | P3 |
| 推送通知（Push） | ❌ 需扩展 | ❌ 未实现 | P3 |
| Webhook 集成 | ❌ 需扩展 | ❌ 未实现 | P3 |
| Slack/Teams 集成 | ❌ 需扩展 | ❌ 未实现 | P3 |

**建议补充内容：**
- 短信通知配置（短信服务商集成）
- 微信通知配置（企业微信/公众号）
- 推送通知（浏览器推送、移动端推送）
- Webhook 配置（自定义通知端点）
- Slack 集成（Slack Webhook）
- Teams 集成（Teams Webhook）
- 通知渠道选择（用户可选择接收渠道）
- 通知模板管理

## 四、补充建议总结

### 必须补充的模块（P0）

1. ✅ **用户管理** - 系统基础，必需
2. ✅ **系统设置** - 系统管理基础，必需

### 建议补充的模块（P1）

3. ✅ **活动流** - 用户体验重要功能
4. ✅ **搜索功能** - 实用功能
5. ✅ **统计分析** - 数据分析功能

### 可选补充的模块（P2-P3）

6. ⚠️ **日历视图** - 可视化增强
7. ⚠️ **导入/导出** - 数据迁移
8. ⚠️ **审计日志** - 安全审计
9. ⚠️ **多渠道通知** - 通知增强

## 五、实施建议

### 立即行动

1. **更新 XMind 思维导图**
   - 添加"用户管理"模块（P0）
   - 添加"系统设置"模块（P0）
   - 添加"活动流"模块（P1）

2. **更新 README.md**
   - 确保所有模块都已列出
   - 为每个模块标注优先级

### 中期规划

3. **开发计划**
   - Phase 1: 实现 P0 模块（用户管理、系统设置）
   - Phase 2: 实现 P1 模块（活动流、搜索、统计）
   - Phase 3: 实现 P2 模块（日历、导入导出、审计）
   - Phase 4: 实现 P3 模块（多渠道通知）

### 长期考虑

4. **扩展功能**
   - 根据用户反馈决定是否实现 P3 功能
   - 考虑插件系统支持这些扩展功能

