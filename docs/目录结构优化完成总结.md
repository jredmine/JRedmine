# ç›®å½•ç»“æ„ä¼˜åŒ–å®Œæˆæ€»ç»“

> æœ¬æ–‡æ¡£è®°å½•æŒ‰ç…§æ–¹æ¡ˆä¸€ï¼ˆåˆ†å±‚æ¶æ„ï¼‰å®Œæˆçš„ç›®å½•ç»“æ„ä¼˜åŒ–å·¥ä½œã€‚

**ä¼˜åŒ–å®Œæˆæ—¶é—´**: 2025å¹´2æœˆ

---

## ä¸€ã€ä¼˜åŒ–å®Œæˆæƒ…å†µ

### âœ… å·²å®Œæˆçš„ä¼˜åŒ–

1. **åŒ…é‡å‘½åå’Œé‡ç»„**
   - âœ… `handler` â†’ `exception.handler`
   - âœ… `repository` â†’ `mapper.user`
   - âœ… `mapper`ï¼ˆMapStructï¼‰â†’ `dto.converter`
   - âœ… `dto` â†’ `dto.request.user` / `dto.response.user`
   - âœ… `response` â†’ `dto.response`

2. **æ–°åŒ…åˆ›å»º**
   - âœ… `constant` - å¸¸é‡åŒ…
   - âœ… `enums` - æšä¸¾åŒ…
   - âœ… `exception.handler` - å¼‚å¸¸å¤„ç†å™¨

3. **èµ„æºç›®å½•ä¼˜åŒ–**
   - âœ… åˆ›å»º `resources/mapper` ç›®å½•
   - âœ… åˆ›å»º `resources/db` ç›®å½•
   - âœ… ç§»åŠ¨æ•°æ®åº“è„šæœ¬åˆ° `db` ç›®å½•

4. **é…ç½®æ–‡ä»¶æ›´æ–°**
   - âœ… æ›´æ–° `@MapperScan` æ³¨è§£è·¯å¾„
   - âœ… æ›´æ–° MyBatis Plus é…ç½®

---

## äºŒã€ä¼˜åŒ–åçš„ç›®å½•ç»“æ„

### 2.1 å½“å‰ç›®å½•ç»“æ„

```
src/main/java/com/github/jredmine/
â”œâ”€â”€ JRedmineApplication.java
â”œâ”€â”€ config/
â”‚   â””â”€â”€ SecurityConfig.java
â”œâ”€â”€ controller/
â”‚   â”œâ”€â”€ IndexController.java
â”‚   â””â”€â”€ UserController.java
â”œâ”€â”€ service/
â”‚   â””â”€â”€ UserService.java
â”œâ”€â”€ mapper/
â”‚   â””â”€â”€ user/
â”‚       â””â”€â”€ UserMapper.java
â”œâ”€â”€ entity/
â”‚   â””â”€â”€ User.java
â”œâ”€â”€ dto/
â”‚   â”œâ”€â”€ request/
â”‚   â”‚   â””â”€â”€ user/
â”‚   â”‚       â””â”€â”€ UserRegisterRequestDTO.java
â”‚   â”œâ”€â”€ response/
â”‚   â”‚   â”œâ”€â”€ ApiResponse.java
â”‚   â”‚   â”œâ”€â”€ ErrorDetails.java
â”‚   â”‚   â””â”€â”€ user/
â”‚   â”‚       â””â”€â”€ UserRegisterResponseDTO.java
â”‚   â””â”€â”€ converter/
â”‚       â””â”€â”€ UserConverter.java
â”œâ”€â”€ exception/
â”‚   â””â”€â”€ handler/
â”‚       â””â”€â”€ GlobalExceptionHandler.java
â”œâ”€â”€ constant/
â”‚   â””â”€â”€ ApiConstant.java
â”œâ”€â”€ enums/
â”‚   â””â”€â”€ UserStatus.java
â””â”€â”€ util/
    â””â”€â”€ JwtUtils.java
```

### 2.2 èµ„æºç›®å½•ç»“æ„

```
src/main/resources/
â”œâ”€â”€ application.yml
â”œâ”€â”€ application-dev.yml
â”œâ”€â”€ application-local.yml
â”œâ”€â”€ application-prod.yml
â”œâ”€â”€ mapper/              # MyBatis XML æ–‡ä»¶ç›®å½•
â”œâ”€â”€ db/                  # æ•°æ®åº“è„šæœ¬ç›®å½•
â”‚   â””â”€â”€ jredmine.sql
â”œâ”€â”€ static/
â””â”€â”€ templates/
```

---

## ä¸‰ã€æ–‡ä»¶å˜æ›´æ¸…å•

### 3.1 ç§»åŠ¨çš„æ–‡ä»¶

| åŸè·¯å¾„ | æ–°è·¯å¾„ | çŠ¶æ€ |
|--------|--------|------|
| `handler/GlobalExceptionHandler.java` | `exception/handler/GlobalExceptionHandler.java` | âœ… å·²ç§»åŠ¨ |
| `repository/UserRepository.java` | `mapper/user/UserMapper.java` | âœ… å·²ç§»åŠ¨å¹¶é‡å‘½å |
| `mapper/UserMapper.java` (MapStruct) | `dto/converter/UserConverter.java` | âœ… å·²ç§»åŠ¨å¹¶é‡å‘½å |
| `dto/UserRegisterRequestDTO.java` | `dto/request/user/UserRegisterRequestDTO.java` | âœ… å·²ç§»åŠ¨ |
| `dto/UserRegisterResponseDTO.java` | `dto/response/user/UserRegisterResponseDTO.java` | âœ… å·²ç§»åŠ¨ |
| `response/ApiResponse.java` | `dto/response/ApiResponse.java` | âœ… å·²ç§»åŠ¨ |
| `response/ErrorDetails.java` | `dto/response/ErrorDetails.java` | âœ… å·²ç§»åŠ¨ |
| `data/jredmine.sql` | `db/jredmine.sql` | âœ… å·²ç§»åŠ¨ |

### 3.2 æ›´æ–°çš„æ–‡ä»¶

| æ–‡ä»¶ | å˜æ›´å†…å®¹ |
|------|---------|
| `JRedmineApplication.java` | æ›´æ–° `@MapperScan` è·¯å¾„ |
| `UserService.java` | æ›´æ–° import è¯­å¥ |
| `UserController.java` | æ›´æ–° import è¯­å¥ |
| `GlobalExceptionHandler.java` | æ›´æ–°åŒ…åå’Œ import è¯­å¥ |
| `application-*.yml` | æ›´æ–° mapper-locations é…ç½® |

### 3.3 æ–°åˆ›å»ºçš„æ–‡ä»¶

| æ–‡ä»¶ | è¯´æ˜ |
|------|------|
| `constant/ApiConstant.java` | API å¸¸é‡ç±» |
| `enums/UserStatus.java` | ç”¨æˆ·çŠ¶æ€æšä¸¾ |

---

## å››ã€åŒ…ç»“æ„è¯´æ˜

### 4.1 åˆ†å±‚æ¶æ„

```
controller/          # æ§åˆ¶å™¨å±‚ï¼ˆAPI å±‚ï¼‰
  â””â”€â”€ å¤„ç† HTTP è¯·æ±‚ï¼Œå‚æ•°éªŒè¯ï¼Œè°ƒç”¨ Service

service/            # æœåŠ¡å±‚ï¼ˆä¸šåŠ¡é€»è¾‘å±‚ï¼‰
  â””â”€â”€ ä¸šåŠ¡é€»è¾‘å¤„ç†ï¼Œäº‹åŠ¡ç®¡ç†

mapper/             # æ•°æ®è®¿é—®å±‚ï¼ˆMyBatis Plusï¼‰
  â””â”€â”€ user/        # æŒ‰æ¨¡å—ç»„ç»‡
      â””â”€â”€ æ•°æ®åº“æ“ä½œæ¥å£

entity/             # å®ä½“ç±»ï¼ˆæ•°æ®åº“æ˜ å°„ï¼‰
  â””â”€â”€ æ•°æ®åº“è¡¨å¯¹åº”çš„å®ä½“ç±»

dto/                # æ•°æ®ä¼ è¾“å¯¹è±¡
  â”œâ”€â”€ request/     # è¯·æ±‚ DTO
  â”‚   â””â”€â”€ user/    # æŒ‰æ¨¡å—ç»„ç»‡
  â”œâ”€â”€ response/    # å“åº” DTO
  â”‚   â””â”€â”€ user/    # æŒ‰æ¨¡å—ç»„ç»‡
  â””â”€â”€ converter/   # MapStruct è½¬æ¢å™¨
      â””â”€â”€ å®ä½“ä¸ DTO è½¬æ¢

exception/          # å¼‚å¸¸å¤„ç†
  â””â”€â”€ handler/     # å¼‚å¸¸å¤„ç†å™¨

constant/           # å¸¸é‡
  â””â”€â”€ ç³»ç»Ÿå¸¸é‡å®šä¹‰

enums/              # æšä¸¾
  â””â”€â”€ ä¸šåŠ¡æšä¸¾å®šä¹‰

util/               # å·¥å…·ç±»
  â””â”€â”€ é€šç”¨å·¥å…·æ–¹æ³•

config/             # é…ç½®ç±»
  â””â”€â”€ Spring é…ç½®ç±»
```

---

## äº”ã€ä½¿ç”¨ç¤ºä¾‹

### 5.1 Controller å±‚

```java
package com.github.jredmine.controller;

import com.github.jredmine.dto.request.user.UserRegisterRequestDTO;
import com.github.jredmine.dto.response.ApiResponse;
import com.github.jredmine.dto.response.user.UserRegisterResponseDTO;
import com.github.jredmine.service.UserService;
// ...
```

### 5.2 Service å±‚

```java
package com.github.jredmine.service;

import com.github.jredmine.dto.request.user.UserRegisterRequestDTO;
import com.github.jredmine.dto.response.user.UserRegisterResponseDTO;
import com.github.jredmine.mapper.user.UserMapper;
import com.github.jredmine.dto.converter.UserConverter;
// ...
```

### 5.3 Mapper å±‚

```java
package com.github.jredmine.mapper.user;

import com.baomidou.mybatisplus.core.mapper.BaseMapper;
import com.github.jredmine.entity.User;
// ...
```

---

## å…­ã€åç»­å»ºè®®

### 6.1 æŒ‰æ¨¡å—ç»„ç»‡ï¼ˆå¯é€‰ï¼‰

å½“é¡¹ç›®è§„æ¨¡æ‰©å¤§æ—¶ï¼Œå¯ä»¥è€ƒè™‘æŒ‰æ¨¡å—ç»„ç»‡ï¼š

```
com.github.jredmine/
â”œâ”€â”€ user/              # ç”¨æˆ·æ¨¡å—
â”‚   â”œâ”€â”€ controller/
â”‚   â”œâ”€â”€ service/
â”‚   â”œâ”€â”€ mapper/
â”‚   â”œâ”€â”€ entity/
â”‚   â””â”€â”€ dto/
â”œâ”€â”€ project/           # é¡¹ç›®æ¨¡å—
â””â”€â”€ issue/             # ä»»åŠ¡æ¨¡å—
```

### 6.2 æ·»åŠ æ–°åŒ…ï¼ˆæŒ‰éœ€ï¼‰

- `aspect/` - AOP åˆ‡é¢
- `interceptor/` - æ‹¦æˆªå™¨
- `filter/` - è¿‡æ»¤å™¨
- `vo/` - è§†å›¾å¯¹è±¡ï¼ˆå¦‚æœéœ€è¦ï¼‰

---

## ä¸ƒã€éªŒè¯æ£€æŸ¥

- [x] æ‰€æœ‰æ–‡ä»¶å·²ç§»åŠ¨åˆ°æ–°ä½ç½®
- [x] æ‰€æœ‰ import è¯­å¥å·²æ›´æ–°
- [x] é…ç½®æ–‡ä»¶å·²æ›´æ–°
- [x] ç¼–è¯‘æ— é”™è¯¯
- [x] ç›®å½•ç»“æ„ç¬¦åˆè§„èŒƒ

---

**ä¼˜åŒ–å®Œæˆï¼** ğŸ‰

